<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
	<title>Bản đồ Genshin - Genshin Impact map</title>
	<meta name="description" content="Bản đồ Genshin, Bản đồ Genshin Impact, Bản đồ rương Genshin Impact, Genshin map, Genshin Impact map, Genshin Impact chest map, Genshin Impact map vn" />
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="leaflet/leaflet.css">
	<link rel="stylesheet" type="text/css" href="css/reset.css">
	<link rel="stylesheet" type="text/css" href="css/index.css">
	<link rel="stylesheet" href="dist/MarkerCluster.css" />
	<link rel="stylesheet" href="dist/MarkerCluster.Default.css" />
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-555995DXBS"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-555995DXBS');
	</script>
</head>

<body>
	<div id='map'></div>
	<div class="danjixiazai"></div>
	<!-- Bộ lọc -->
	<div class="control-containor">
		<img class="Background" src="imgs/con_img/Content.png">
		<a href="javascript:;" class="fold-btn hd">Thu gọn</a>
		<div class="person-div">
			<span class="Layer_FST map-opts" area="MD" itemtype="TX">
				<a href="javascript:;" class="save-btn disable ">Tải xuống Đánh dấu</a>
			</span>
		</div>
		<div class="topLine"></div>
		<!-- Tab bên trái của bộ lọc -->
		<ul class="con-type-label-containor">
			<li class="con-type-label lable1" i_type="TX">Oculi</li>
			<li class="con-type-label lable2" i_type="TC">Nguyên liệu</li>
			<li class="con-type-label lable3" i_type="KW">Quặng</li>
			<li class="con-type-label lable4" i_type="GW">Quái</li>
			<li class="con-type-label lable5" i_type="SC">Món ăn</li>
			<li class="con-type-label lable6" i_type="LJ">Thuật giả kim</li>
		</ul>
		<!-- Lọc phân loại khu vực phía trên -->
		<ul class="area-list-containor">
			<a href="javascript:;" class="area-list-li-containor on" i_area="MD">
				<span class="area-text">Mond</span>
				<span class="area-img mengde on hd">area-img</span>
			</a>
			<a href="javascript:;" class="area-list-li-containor off" i_area="LY">
				<span class="area-text">Liyue</span>
				<span class="area-img liyue hd off">area-img</span>
			</a>
		</ul>
		<!-- Chọn hộp đã chọn trong bộ lọc (phần tử giữ chỗ, không di chuyển) -->
		<ul class="selector-list-containor">
			<p style="display: none;"></p>
		</ul>
		<!-- Lọc danh sách bộ lọc và lọc các mục -->
		<div class="options-containor">
			<div class="options-list">
				<span class="Layer_FST map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_0.png" class="map-opts-icon" alt="icon"></div>Phong thần đồng
				</span>
				<span class="Layer_YST map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_1.png" class="map-opts-icon" alt="icon"></div>Nham thần đồng
				</span>
				<span class="Layer_DLK_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_2.png" class="map-opts-icon" alt="icon"></div>Đền thờ
				</span>
				<span class="Layer_DLK_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_3.png" class="map-opts-icon" alt="icon"></div>Đền thờ
				</span>
				<span class="Layer_BX_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_26.png" class="map-opts-icon" alt="icon"></div>Rương
				</span>
				<span class="Layer_BX_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_27.png" class="map-opts-icon" alt="icon"></div>Rương
				</span>
				<span class="Layer_SJK_LY map-opts" area="LY" itemtype="KW">
					<div class="img-border"><img src="imgs/icon_16.png" class="map-opts-icon" alt="icon"></div>Mỏ pha lê-Liyue
				</span>
				<span class="Layer_BTK_LY map-opts" area="LY" itemtype="KW">
					<div class="img-border"><img src="imgs/icon_17.png" class="map-opts-icon" alt="icon"></div>Quặng sắt-Liyue
				</span>
				<span class="Layer_SJK_MD map-opts" area="MD" itemtype="KW">
					<div class="img-border"><img src="imgs/icon_18.png" class="map-opts-icon" alt="icon"></div>Mỏ pha lê-Mond
				</span>
				<span class="Layer_BTK_MD map-opts" area="MD" itemtype="KW">
					<div class="img-border"><img src="imgs/icon_19.png" class="map-opts-icon" alt="icon"></div>Quặng sắt-Mond
				</span>
				<span class="Layer_JYJJ map-opts" area="LY" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_4.png" class="map-opts-icon" alt="icon"></div>Ớt Tuyệt Vân - Xiangling
				</span>
				<span class="Layer_NSH map-opts" area="LY" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_5.png" class="map-opts-icon" alt="icon"></div>Hoa Nghê Thường - Xingqiu
				</span>
				<span class="Layer_LLBH map-opts" area="LY" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_6.png" class="map-opts-icon" alt="icon"></div>Bách Hợp Lưu Ly - Ningguang
				</span>
				<span class="Layer_YPS map-opts" area="LY" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_14.png" class="map-opts-icon" alt="icon"></div>Dạ Thạch Phách - Beidou
				</span>
				<span class="Layer_SP map-opts" area="LY" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_15.png" class="map-opts-icon" alt="icon"></div>Thạch Phách - Keqing, Chongyun
				</span>
				<span class="Layer_GGG map-opts" area="MD" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_7.png" class="map-opts-icon" alt="icon"></div>Quả Móc Câu
				</span>
				<span class="Layer_DDL map-opts" area="MD" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_8.png" class="map-opts-icon" alt="icon"></div>Hoa Calla Lily
				</span>
				<span class="Layer_LLM map-opts" area="MD" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_11.png" class="map-opts-icon" alt="icon"></div>Quả Dâu Đỏ
				</span>
				<span class="Layer_SXLYH map-opts" area="MD" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_9.png" class="map-opts-icon" alt="icon"></div>Hoa Cecilia
				</span>
				<span class="Layer_MFMG map-opts" area="MD" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_10.png" class="map-opts-icon" alt="icon"></div>Nấm Rơm Gió
				</span>
				<span class="Layer_FCJ map-opts" area="MD" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_12.png" class="map-opts-icon" alt="icon"></div>Cúc Cánh Quạt
				</span>
				<span class="Layer_PGYZ map-opts" area="MD" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_13.png" class="map-opts-icon" alt="icon"></div>Hạt Bồ Công Anh
				</span>
				<span class="Layer_SYFS_MD map-opts" area="MD" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_31.png" class="map-opts-icon" alt="icon"></div>Pháp sư-Mond
				</span>
				<span class="Layer_SYFS_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_24.png" class="map-opts-icon" alt="icon"></div>Pháp sư-Liyue
				</span>
				<span class="Layer_LYSS_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_22.png" class="map-opts-icon" alt="icon"></div>雷莹术士-Liyue
				</span>
				<span class="Layer_ZWCLR_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_23.png" class="map-opts-icon" alt="icon"></div>Người xử lý nợ-Liyue
				</span>
				<span class="Layer_XQD_MD map-opts" area="MD" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_37.png" class="map-opts-icon" alt="icon"></div>Fatui-Mond
				</span>
				<span class="Layer_XQD_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_38.png" class="map-opts-icon" alt="icon"></div>Fatui-Liyue
				</span>
				<span class="Layer_PPH_MD map-opts" area="MD" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_35.png" class="map-opts-icon" alt="icon"></div>Cây lừa dối-Mond
				</span>
				<span class="Layer_PPH_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_36.png" class="map-opts-icon" alt="icon"></div>Cây lừa dối-Liyue
				</span>
				<span class="Layer_YYLX_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_39.png" class="map-opts-icon" alt="icon"></div>Rồng đá-Liyue
				</span>
				<span class="Layer_YJSW_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_20.png" class="map-opts-icon" alt="icon"></div>Thủ vệ di tích-Liyue
				</span>
				<span class="Layer_YJSW_MD map-opts" area="MD" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_29.png" class="map-opts-icon" alt="icon"></div>Thủ vệ di tích-Mond
				</span>
				<span class="Layer_YJLZ_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_21.png" class="map-opts-icon" alt="icon"></div>Thủ vệ biết bay-Liyue
				</span>
				<span class="Layer_DBT_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_34.png" class="map-opts-icon" alt="icon"></div>Kẻ trộm-Liyue
				</span>
				<span class="Layer_DXQQR_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_25.png" class="map-opts-icon" alt="icon"></div>Bạo Đồ Hilichurl-Liyue
				</span>
				<span class="Layer_LLD map-opts" area="LY" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_28.png" class="map-opts-icon" alt="icon"></div>Túi lưu ly
				</span>
				<span class="Layer_DXQQR_MD map-opts" area="MD" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_30.png" class="map-opts-icon" alt="icon"></div>Bạo Đồ Hilichurl-Mond
				</span>
				<span class="Layer_SLM_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_41.png" class="map-opts-icon" alt="icon"></div>Chất nhờn-Liyue
				</span>
				<span class="Layer_QX map-opts" area="LY" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_44.png" class="map-opts-icon" alt="icon"></div>Thanh tâm
				</span>
				<span class="Layer_MW map-opts" area="LY" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_45.png" class="map-opts-icon" alt="icon"></div>Cỏ đuôi ngựa
				</span>
				<span class="Layer_LP map-opts" area="LY" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_46.png" class="map-opts-icon" alt="icon"></div>Đài sen
				</span>
				<span class="Layer_XL map-opts" area="LY" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_47.png" class="map-opts-icon" alt="icon"></div>Ốc sao
				</span>
				<span class="Layer_XDC map-opts" area="MD" itemtype="TC">
					<div class="img-border"><img src="imgs/icon_48.png" class="map-opts-icon" alt="icon"></div>小灯草
				</span>
				<span class="Layer_BWHHD_MD map-opts" area="MD" itemtype="LJ">
					<div class="img-border"><img src="imgs/icon_49.png" class="map-opts-icon" alt="icon"></div>Hoa băng giá-Mond
				</span>
				<span class="Layer_BWHHD_LY map-opts" area="LY" itemtype="LJ">
					<div class="img-border"><img src="imgs/icon_50.png" class="map-opts-icon" alt="icon"></div>Hoa băng giá-Liyue
				</span>
				<span class="Layer_LYHHR_MD map-opts" area="MD" itemtype="LJ">
					<div class="img-border"><img src="imgs/icon_51.png" class="map-opts-icon" alt="icon"></div>Hoa lửa-Mond
				</span>
				<span class="Layer_LYHHR_LY map-opts" area="LY" itemtype="LJ">
					<div class="img-border"><img src="imgs/icon_52.png" class="map-opts-icon" alt="icon"></div>Hoa lửa-Liyue
				</span>
				<span class="Layer_DQSJ_MD map-opts" area="MD" itemtype="LJ">
					<div class="img-border"><img src="imgs/icon_53.png" class="map-opts-icon" alt="icon"></div>Tinh thể điện-Mond
				</span>
				<span class="Layer_DQSJ_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_54.png" class="map-opts-icon" alt="icon"></div>Tinh thể điện-Liyue
				</span>
				<!-- <span class="Layer_SBLM_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_55.png" class="map-opts-icon" alt="icon"></div>撒币卢咪-Mond
				</span> -->
				<!-- <span class="Layer_SBLM_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_56.png" class="map-opts-icon" alt="icon"></div>撒币卢咪-Liyue
				</span> -->
				<!-- <span class="Layer_FGS_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_57.png" class="map-opts-icon" alt="icon"></div>发光髓-Mond
				</span> -->
				<!-- <span class="Layer_FGS_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_58.png" class="map-opts-icon" alt="icon"></div>发光髓-Liyue
				</span> -->
				<!-- <span class="Layer_JH_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_59.png" class="map-opts-icon" alt="icon"></div>晶核-Mond
				</span> -->
				<!-- <span class="Layer_JH_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_60.png" class="map-opts-icon" alt="icon"></div>晶核-Liyue
				</span> -->
				<!-- <span class="Layer_JYC_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_61.png" class="map-opts-icon" alt="icon"></div>金鱼草-Mond
				</span> -->
				<!-- <span class="Layer_JYC_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_62.png" class="map-opts-icon" alt="icon"></div>金鱼草-Liyue
				</span> -->
				<!-- <span class="Layer_HDCB_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_63.png" class="map-opts-icon" alt="icon"></div>蝴蝶翅膀-Mond
				</span> -->
				<!-- <span class="Layer_HDCB_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_64.png" class="map-opts-icon" alt="icon"></div>蝴蝶翅膀-Liyue
				</span> -->
				<span class="Layer_PX_MD map-opts" area="MD" itemtype="SC">
					<div class="img-border"><img src="imgs/icon_65.png" class="map-opts-icon" alt="icon"></div>Cua-Mond
				</span>
				<span class="Layer_PX_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_66.png" class="map-opts-icon" alt="icon"></div>Cua-Liyue
				</span>
				<!-- <span class="Layer_QW_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_67.png" class="map-opts-icon" alt="icon"></div>青蛙-Mond
				</span> -->
				<!-- <span class="Layer_QW_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_68.png" class="map-opts-icon" alt="icon"></div>青蛙-Liyue
				</span> -->
				<!-- <span class="Layer_TTH_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_69.png" class="map-opts-icon" alt="icon"></div>甜甜花-Mond
				</span> -->
				<!-- <span class="Layer_TTH_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_70.png" class="map-opts-icon" alt="icon"></div>甜甜花-Liyue
				</span> -->
				<!-- <span class="Layer_BH_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_71.png" class="map-opts-icon" alt="icon"></div>薄荷-Mond
				</span> -->
				<!-- <span class="Layer_BH_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_72.png" class="map-opts-icon" alt="icon"></div>薄荷-Liyue
				</span> -->
				<span class="Layer_SongR_MD map-opts" area="MD" itemtype="SC">
					<div class="img-border"><img src="imgs/icon_73.png" class="map-opts-icon" alt="icon"></div>Nhung tùng-Mond
				</span>
				<span class="Layer_SongR_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_74.png" class="map-opts-icon" alt="icon"></div>Nhung tùng-Liyue
				</span>
				<span class="Layer_ShouR_MD map-opts" area="MD" itemtype="SC">
					<div class="img-border"><img src="imgs/icon_75.png" class="map-opts-icon" alt="icon"></div>Thịt thú-Mond
				</span>
				<span class="Layer_ShouR_LY map-opts" area="LY" itemtype="SC">
					<div class="img-border"><img src="imgs/icon_76.png" class="map-opts-icon" alt="icon"></div>Thịt thú-Liyue
				</span>
				<span class="Layer_QR_MD map-opts" area="MD" itemtype="SC">
					<div class="img-border"><img src="imgs/icon_77.png" class="map-opts-icon" alt="icon"></div>Gia cầm-Mond
				</span>
				<span class="Layer_QR_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_78.png" class="map-opts-icon" alt="icon"></div>Gia cầm-Liyue
				</span>
				<!-- <span class="Layer_YR_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_79.png" class="map-opts-icon" alt="icon"></div>鱼肉-Mond
				</span> -->
				<span class="Layer_YR_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_80.png" class="map-opts-icon" alt="icon"></div>Cá-Liyue
				</span>
				<!-- <span class="Layer_BLB_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_81.png" class="map-opts-icon" alt="icon"></div>白萝卜-Mond
				</span> -->
				<!-- <span class="Layer_BLB_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_82.png" class="map-opts-icon" alt="icon"></div>白萝卜-Liyue
				</span> -->
				<!-- <span class="Layer_HLB_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_83.png" class="map-opts-icon" alt="icon"></div>胡萝卜-Mond
				</span> -->
				<!-- <span class="Layer_HLB_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_84.png" class="map-opts-icon" alt="icon"></div>胡萝卜-Liyue
				</span> -->
				<!-- <span class="Layer_MG_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_85.png" class="map-opts-icon" alt="icon"></div>蘑菇-Mond
				</span> -->
				<!-- <span class="Layer_MG_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_86.png" class="map-opts-icon" alt="icon"></div>蘑菇-Liyue
				</span> -->
				<!-- <span class="Layer_XYWB_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_87.png" class="map-opts-icon" alt="icon"></div>蜥蜴尾巴-Mond
				</span> -->
				<!-- <span class="Layer_XYWB_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_88.png" class="map-opts-icon" alt="icon"></div>蜥蜴尾巴-Liyue
				</span> -->
				<!-- <span class="Layer_SG_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_89.png" class="map-opts-icon" alt="icon"></div>松果-Mond
				</span> -->
				<!-- <span class="Layer_SG_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_90.png" class="map-opts-icon" alt="icon"></div>松果-Liyue
				</span> -->
				<!-- <span class="Layer_SM_MD map-opts" area="MD" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_91.png" class="map-opts-icon" alt="icon"></div>树莓-Mond
				</span> -->
				<!-- <span class="Layer_SM_LY map-opts" area="LY" itemtype="TX">
					<div class="img-border"><img src="imgs/icon_92.png" class="map-opts-icon" alt="icon"></div>树莓-Liyue
				</span> -->
				<!-- <span class="Layer_QQR_MD map-opts" area="MD" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_93.png" class="map-opts-icon" alt="icon"></div>丘丘人-Mond
				</span> -->
				<!-- <span class="Layer_QQR_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_94.png" class="map-opts-icon" alt="icon"></div>丘丘人-Liyue
				</span> -->
				<!-- <span class="Layer_QQSM_MD map-opts" area="MD" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_95.png" class="map-opts-icon" alt="icon"></div>丘丘萨满-Mond
				</span> -->
				<!-- <span class="Layer_QQSM_LY map-opts" area="LY" itemtype="GW">
					<div class="img-border"><img src="imgs/icon_96.png" class="map-opts-icon" alt="icon"></div>丘丘萨满-Liyue
				</span> -->
			</div>
		</div>
	</div>
	<div class="bottom-rules">
		<a href="disclaimer.html" target="_bal" class="disclaimer">Tuyên bố từ chối trách nhiệm / Tuyển dụng</a>
	</div>
	<div class="bottom-beian">
		<!-- <a href="http://beian.miit.gov.cn" target="_bal" class="beian">蜀ICP备2020028219号</a> -->
	</div>
	<script src="js/jquery-3.5.1.min.js"></script>
	<script src="leaflet/leaflet.js"></script>
	<script src="dist/leaflet.markercluster-src.js"></script>
	<script src="js/Item_Json.js"></script>
	<script src="js/index.js"></script>
	<script>
		$(".area-list-li-containor").hide();
		$(".area-list-containor").show();
		//Chức năng lọc
		var i_type = "ALL";
		var area_idx = "MD";

		function filter() {
			if (i_type == "ALL") {
				for (let i = 0; i < $(".options-list .map-opts").length; i++) {
					if ($(".options-list .map-opts").eq(i).attr("area") == area_idx) {
						$(".options-list .map-opts").eq(i).show();
					} else {
						$(".options-list .map-opts").eq(i).hide();
					}
				}
			} else {
				for (let i = 0; i < $(".options-list .map-opts").length; i++) {
					if ($(".options-list .map-opts").eq(i).attr("itemtype") == i_type && $(".options-list .map-opts").eq(i)
						.attr("area") == area_idx) {
						$(".options-list .map-opts").eq(i).show();
					} else {
						$(".options-list .map-opts").eq(i).hide();
					}
				}
			}
		};
		//Chức năng chuyển đổi kiểu cho các tab và nút chọn khu vực
		$(".con-type-label").click(function () {
			$(".con-type-label").removeClass("on");
			$(this).addClass("on");
			i_type = $(this).attr("i_type");
			filter();
		});
		$(".area-list-li-containor").click(function () {
			if ($(this).hasClass("undone") == false) {
				var idx = $(this).index();
				$(".area-list-li-containor,.area-list-li-containor:not(.undone) .area-img").removeClass("on");
				$(".area-list-li-containor,.area-list-li-containor:not(.undone) .area-img").addClass("off");
				$(`.area-list-li-containor:eq(${idx})`).removeClass("off");
				$(`.area-list-li-containor:eq(${idx})`).addClass("on");
				$(`.area-list-li-containor:eq(${idx}) .area-img`).removeClass("off");
				$(`.area-list-li-containor:eq(${idx}) .area-img`).addClass("on");
				area_idx = $(this).attr("i_area");
				filter();
			}
		});
		//Nhấp vào mục bộ lọc để thay đổi mục bộ chọn
		$(".options-list .map-opts").click(function () {
			$(".selector-hint").hide();
			if ($(this).hasClass("on") == true) {
				let text = $(this).text();
				let fclass = $(this).attr("class");
				fclass = fclass.slice(0, fclass.indexOf(" "));
				for (let i = 0; i < $(".selector-list-containor p").length; i++) {
					let bind = $(".selector-list-containor p").eq(i).attr("bind");
					if (fclass == bind) {
						$(".selector-list-containor p").eq(i).remove();
					}
				}
				//Thay đổi điểm đánh dấu bản đồ
				let typeclass = $(this).attr("class");
				let idx = typeclass.indexOf(" ");
				let typetext = typeclass.slice(0, idx);
				// $(`.leaflet-control-layers-overlays .${typetext}`).parent().prev().trigger("click");
				map.removeLayer(LayerMap[fclass]);
			} else {
				let text = $(this).text();
				let fclass = $(this).attr("class");
				fclass = fclass.slice(0, fclass.indexOf(" "));
				$(".selector-list-containor p:last").after(`
					<p class="opt-selector" bind="${fclass}">${text}<a href="javascript:;" class="opt-selector-close hd">close</a></p>
				`);
				$(".selector-list-containor p:last").click(function () {
					let bind = $(this).attr("bind");
					for (let i = 0; i < $(".options-list .map-opts").length; i++) {
						if ($(".options-list .map-opts").eq(i).hasClass(bind) == true) {
							$(".options-list .map-opts").eq(i).trigger("click");
						}
					}
					if ($(".opt-selector").length == 0) {
						$(".selector-hint").show();
					}
				});
				//Thay đổi điểm đánh dấu bản đồ
				let typeclass = $(this).attr("class");
				let idx = typeclass.indexOf(" ");
				let typetext = typeclass.slice(0, idx);
				// $(`.leaflet-control-layers-overlays .${typetext}`).parent().prev().trigger("click");
				map.addLayer(LayerMap[fclass]);
			}
			$(this).toggleClass("on");
			$(".map-opts.on").click(function () {
				if ($(".opt-selector").length == 0) {
					$(".selector-hint").show();
				}
			})
		});
		//Khởi tạo chức năng bộ lọc
		$(document).ready(function () {
			$(".con-type-label:first").trigger("click");
			$(".reg_log_link").click(function () {
				alert("即将开放,敬请期待！");
			})

			// Sao chép phương pháp
			function copyText(text, callback) { // text: Sao chép cái gì, callback: Gọi lại
				var tag = document.createElement('input');
				tag.setAttribute('id', 'cp_hgz_input');
				tag.value = text;
				document.getElementsByTagName('body')[0].appendChild(tag);
				document.getElementById('cp_hgz_input').select();
				document.execCommand('copy');
				document.getElementById('cp_hgz_input').remove();
				if (callback) {
					callback(text)
				}
			}

			//Tải xuống và lưu dữ liệu và sao chép vào khay nhớ tạm
			$(".save-btn").click(function () {
				var markedLog = []
				for (var i = 0; i < 29; i++) {
					for (var j = 1; j < 1200; j++) {
						var key = i + "_" + j
						if (localStorage.getItem(key)) {
							markedLog.push(key)
						}
					}
				}
				var eleLink = document.createElement('a');
				eleLink.download = 'markers.json';
				eleLink.style.display = 'none';
				var blob = new Blob([JSON.stringify(markedLog)]);
				eleLink.href = URL.createObjectURL(blob);
				document.body.appendChild(eleLink);
				eleLink.click();
				document.body.removeChild(eleLink);

				var markedLog1 = []
				for (var i = 0; i < 29; i++) {
					for (var j = 1; j < 1200; j++) {
						var key = i + "_" + j
						if (localStorage.getItem(key)) {
							markedLog1.push(key)
						}
					}
				}
				toolresult = JSON.stringify(markedLog1);
				var texts = toolresult
				copyText(texts, function () {
					alert('Sao chép thành công \nSao chép nội dung' + texts)
				})
				console.log(toolresult);
			})

			//单机跳转
			$(".danjixiazai").click(function () {
				window.event.returnValue = false;
				window.location.href = 'main.html';
			})

			var statu = 1;
			if (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {
				$(".bottom-beian").hide();
				$(".fold-btn").css("background", "url(imgs/con_img/fold_open.png)");
				//Một số chuyển thể M-terminal
				$(".control-containor").css("transform-origin", "0% 0% 0");
				$(".control-containor").css("transform", "scale(0.5)");
				// $(".control-containor").css("right", "-255px");
				// $(".control-containor").css("width", "300px");
				// $(".fold-btn").css("left", "-55px");
				//Hoạt ảnh chuyển đổi bảng điều khiển(m)
				$(".fold-btn").click(function () {
					if (statu == 1) {
						$(".area-list-containor").show();
						// $(".control-containor").css("width", "431px");
						// $(".fold-btn").css("left", "65px");
						$(".control-containor").animate({
							right: '-215px'
						}, function () {
							statu = 0;
						});
						$(".area-list-li-containor").fadeIn(500);
						$(".fold-btn").css("background-image", "url(imgs/con_img/fold.png)");
					} else {
						$(".control-containor").animate({
							right: '-415px'
						}, function () {
							statu = 1;
							// $(".control-containor").css("width", "431px");
							// $(".fold-btn").css("left", "-55px");
						});
						$(".area-list-li-containor").fadeOut(500);
						$(".fold-btn").css("background-image", "url(imgs/con_img/fold_open.png)");
					}
				});
				$(".area-list-containor").show();
				// $(".control-containor").css("width", "431px");
				// $(".fold-btn").css("left", "65px");
				$(".control-containor").animate({
					right: '-215px'
				}, function () {
					statu = 0;
				});
				$(".area-list-li-containor").fadeIn(500);
				$(".fold-btn").css("background-image", "url(imgs/con_img/fold.png)");
			}
			// else 
			// {
			// 	//面板切换动画(pc)
			// 	var Lock = true; //锁，防止抖动
			// 	$(".control-containor").mouseenter(function () {
			// 		Lock = true;
			// 		$(".control-containor").animate({
			// 			right: '0px'
			// 		});
			// 		for (let i = 0; i < 5; i++) {
			// 			$(".con-type-label").fadeIn(500);
			// 		}
			// 	});
			// 	$(".control-containor").mouseleave(function () {
			// 		Lock = false;
			// 		setTimeout(function () {
			// 			if (Lock == false) {
			// 				$(".control-containor").animate({
			// 					right: '-270px'
			// 				});
			// 				for (let i = 0; i < 5; i++) {
			// 					$(".con-type-label").fadeOut(500);
			// 				}
			// 			}
			// 		}, 500) //移出鼠标延迟500ms收回
			// 	});
			// }
			else {
				$(".fold-btn").click(function () {
					if (statu == 1) {
						// $(".control-containor").css("width", "420px");
						// $(".fold-btn").css("left", "60px");
						$(".control-containor").animate({
							right: '-108px'
						}, function () {
							statu = 0;
						});
						$(".area-list-li-containor").fadeIn(500);
						$(".fold-btn").css("background-image", "url(imgs/con_img/fold.png)");
					} else {
						$(".control-containor").animate({
							right: '-415px'
						}, function () {
							statu = 1;
							// $(".control-containor").css("width", "300px");
							// $(".fold-btn").css("left", "-60px");
						});
						$(".area-list-li-containor").fadeOut(500);
						$(".fold-btn").css("background-image", "url(imgs/con_img/fold_open.png)");
					}
				});
				$(".control-containor").animate({
					right: '-108px'
				}, function () {
					statu = 0;
				});
				$(".area-list-li-containor").fadeIn(500);
				$(".fold-btn").css("background-image", "url(imgs/con_img/fold.png)");
			}
		});
		//Ngăn chặn chức năng mở rộng quy mô IOS
		window.onload = function () {
			// Ngăn nhấp đúp để phóng to
			var lastTouchEnd = 0;
			document.addEventListener('touchstart', function (event) {
				if (event.touches.length > 1) {
					event.preventDefault();
				}
			});
			document.addEventListener('touchend', function (event) {
				var now = (new Date()).getTime();
				if (now - lastTouchEnd <= 300) {
					event.preventDefault();
				}
				lastTouchEnd = now;
			}, false);
			// Ngăn thu phóng chụm
			document.addEventListener('gesturestart', function (event) {
				event.preventDefault();
			});
		}
	</script>
</body>

</html>